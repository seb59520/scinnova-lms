{
  "title": "Chapitre 3 - API comme contrat : conception contractuelle et standards",
  "description": "Ce chapitre couvre la conception contractuelle des API : OpenAPI, JSON Schema et versioning. L'objectif est de permettre aux étudiants de définir une API complète sans écrire une seule ligne de code back-end.",
  "status": "draft",
  "access_type": "free",
  "theme": {
    "primaryColor": "#3B82F6",
    "secondaryColor": "#8B5CF6",
    "fontFamily": "Inter"
  },
  "modules": [
    {
      "title": "Chapitre 3 - API comme contrat : conception contractuelle et standards",
      "position": 3,
      "theme": {
        "primaryColor": "#3B82F6",
        "secondaryColor": "#8B5CF6"
      },
      "items": [
        {
          "type": "resource",
          "title": "Introduction : Pourquoi une API est un contrat",
          "position": 1,
          "published": true,
          "content": {
            "body": {
              "type": "doc",
              "content": [
                {
                  "type": "heading",
                  "attrs": { "level": 1 },
                  "content": [
                    { "type": "text", "text": "Pourquoi une API est un contrat" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Maintenant que vous savez comment les API peuvent fonctionner, voyons comment on les définit avant de les construire."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "API = engagement entre équipes" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Une API n'est pas seulement du code : c'est un contrat formel entre le client et le serveur. Ce contrat définit :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Les endpoints disponibles" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Les formats de données acceptés et retournés" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Les codes de statut HTTP" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Les règles d'authentification" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Client et serveur évoluent indépendamment" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Dans une architecture moderne, le client et le serveur sont souvent développés par des équipes différentes, voire par des organisations différentes. Le contrat API permet :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Le développement en parallèle" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "L'évolution indépendante de chaque partie" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "La réutilisation par plusieurs clients" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Risque de rupture sans contrat" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Sans contrat formel, vous risquez :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Des incompatibilités entre client et serveur" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Des régressions lors des mises à jour" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Des bugs difficiles à diagnostiquer" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Une perte de temps en communication" }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "description": "Introduction au concept d'API comme contrat"
          }
        },
        {
          "type": "resource",
          "title": "Approche API-first : concevoir avant de coder",
          "position": 2,
          "published": true,
          "content": {
            "body": {
              "type": "doc",
              "content": [
                {
                  "type": "heading",
                  "attrs": { "level": 1 },
                  "content": [
                    { "type": "text", "text": "Approche API-first : concevoir avant de coder" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "L'approche API-first consiste à concevoir et documenter l'API avant d'écrire le code d'implémentation. Cette méthode offre de nombreux avantages."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Principe fondamental" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Au lieu de coder d'abord et documenter ensuite, on définit d'abord le contrat API, puis on implémente le code qui respecte ce contrat."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Avantages de l'approche API-first" }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Clarté" }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "L'API est clairement définie et compréhensible par tous" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Réduction des ambiguïtés et des malentendus" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Testabilité" }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Génération automatique de tests contractuels" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Validation automatique de la conformité" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Mock servers pour tester le client sans serveur" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Collaboration front/back" }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Les équipes front-end et back-end peuvent travailler en parallèle" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Le front-end peut utiliser un mock server pendant le développement" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Réduction des dépendances entre équipes" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Workflow API-first" }
                  ]
                },
                {
                  "type": "orderedList",
                  "attrs": { "start": 1 },
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Définir le contrat API (OpenAPI)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Valider le contrat avec les parties prenantes" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Générer les mocks et la documentation" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Développer le client et le serveur en parallèle" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Valider que l'implémentation respecte le contrat" }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "description": "Présentation de l'approche API-first et de ses avantages"
          }
        },
        {
          "type": "resource",
          "title": "OpenAPI (Swagger) : définir le contrat",
          "position": 3,
          "published": true,
          "content": {
            "body": {
              "type": "doc",
              "content": [
                {
                  "type": "heading",
                  "attrs": { "level": 1 },
                  "content": [
                    { "type": "text", "text": "OpenAPI (Swagger) : définir le contrat" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "OpenAPI (anciennement Swagger) est le standard de fait pour décrire les API REST. Il permet de définir de manière formelle et lisible le contrat d'une API."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Objectif d'OpenAPI" }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Décrire de manière standardisée une API REST" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Permettre la génération automatique de code, de documentation et de tests" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Faciliter la collaboration entre équipes" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Structure d'un fichier OpenAPI" }
                  ]
                },
                {
                  "type": "codeBlock",
                  "attrs": { "language": "yaml" },
                  "content": [
                    {
                      "type": "text",
                      "text": "openapi: 3.0.0\ninfo:\n  title: API Example\n  version: 1.0.0\nservers:\n  - url: https://api.example.com\npaths:\n  /users:\n    get:\n      summary: Liste des utilisateurs\n      responses:\n        '200':\n          description: Succès\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/User'\ncomponents:\n  schemas:\n    User:\n      type: object\n      properties:\n        id:\n          type: integer\n        name:\n          type: string"
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Éléments clés" }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Endpoints" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Définis dans la section `paths`. Chaque endpoint est identifié par son chemin (ex: `/users`) et ses méthodes HTTP (GET, POST, PUT, DELETE, etc.)."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Méthodes HTTP" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Chaque méthode définit les paramètres, le corps de la requête, les réponses possibles et les codes de statut."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Schémas" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Définis dans `components/schemas`, ils décrivent la structure des données (modèles de données, types, contraintes)."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Swagger UI" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Swagger UI est un outil qui génère automatiquement une interface web interactive à partir d'un fichier OpenAPI. Il permet de :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Visualiser tous les endpoints de l'API" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Tester les endpoints directement depuis le navigateur" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Consulter les schémas de données" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Partager la documentation avec les équipes" }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "description": "Présentation d'OpenAPI et de sa structure"
          }
        },
        {
          "type": "resource",
          "title": "JSON Schema : validation des données",
          "position": 4,
          "published": true,
          "content": {
            "body": {
              "type": "doc",
              "content": [
                {
                  "type": "heading",
                  "attrs": { "level": 1 },
                  "content": [
                    { "type": "text", "text": "JSON Schema : validation des données" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "JSON Schema est un vocabulaire qui permet de décrire la structure et les contraintes des données JSON. Il est utilisé dans OpenAPI pour valider les requêtes et réponses."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Objectif de JSON Schema" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "JSON Schema permet de définir des règles de validation pour garantir que les données respectent le contrat défini."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Validation des données" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Un schéma JSON Schema peut valider :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Les types de données (string, number, boolean, object, array)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Les propriétés requises vs optionnelles" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Les formats (email, date, URI, etc.)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Les contraintes (min/max, pattern, enum)" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Exemple de schéma" }
                  ]
                },
                {
                  "type": "codeBlock",
                  "attrs": { "language": "json" },
                  "content": [
                    {
                      "type": "text",
                      "text": "{\n  \"type\": \"object\",\n  \"required\": [\"email\", \"name\"],\n  \"properties\": {\n    \"email\": {\n      \"type\": \"string\",\n      \"format\": \"email\"\n    },\n    \"name\": {\n      \"type\": \"string\",\n      \"minLength\": 2,\n      \"maxLength\": 100\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"maximum\": 150\n    }\n  }\n}"
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Contraintes de structure" }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "`required` : liste des propriétés obligatoires" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "`minLength` / `maxLength` : longueur des chaînes" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "`minimum` / `maximum` : valeurs numériques" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "`pattern` : expressions régulières pour les chaînes" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "`enum` : liste de valeurs autorisées" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Sécurité et robustesse" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "La validation JSON Schema apporte :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Protection contre les données malformées" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Détection précoce des erreurs" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Réduction des risques de sécurité (injection, etc.)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Documentation automatique des contraintes" }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "description": "Présentation de JSON Schema pour la validation des données"
          }
        },
        {
          "type": "resource",
          "title": "Versioning d'API : gérer l'évolution",
          "position": 5,
          "published": true,
          "content": {
            "body": {
              "type": "doc",
              "content": [
                {
                  "type": "heading",
                  "attrs": { "level": 1 },
                  "content": [
                    { "type": "text", "text": "Versioning d'API : gérer l'évolution" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Les API évoluent au fil du temps. Le versioning permet de gérer ces évolutions tout en préservant la compatibilité avec les clients existants."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Versioning sémantique" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Le versioning sémantique suit le format MAJOR.MINOR.PATCH (ex: 1.2.3) :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "MAJOR : changements incompatibles (breaking changes)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "MINOR : nouvelles fonctionnalités rétrocompatibles" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "PATCH : corrections de bugs rétrocompatibles" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Breaking vs non-breaking changes" }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Breaking changes (incompatibles)" }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Suppression d'un endpoint" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Suppression d'un champ dans une réponse" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Changement du type d'un champ" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Modification du comportement d'un endpoint" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Non-breaking changes (compatibles)" }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Ajout d'un nouvel endpoint" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Ajout d'un champ optionnel dans une réponse" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Ajout d'un paramètre optionnel" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Stratégies de versioning" }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Version dans l'URL" }
                  ]
                },
                {
                  "type": "codeBlock",
                  "attrs": { "language": "text" },
                  "content": [
                    {
                      "type": "text",
                      "text": "GET /api/v1/users\nGET /api/v2/users"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Avantages : simple, explicite. Inconvénient : pollution de l'URL."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Version dans les headers" }
                  ]
                },
                {
                  "type": "codeBlock",
                  "attrs": { "language": "text" },
                  "content": [
                    {
                      "type": "text",
                      "text": "GET /api/users\nHeaders: API-Version: 2.0"
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Avantages : URL propre. Inconvénient : moins visible."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Gestion de la rétrocompatibilité" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Pour maintenir la rétrocompatibilité :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Maintenir les anciennes versions pendant une période de transition" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Communiquer les dates de dépréciation" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Fournir des guides de migration" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Utiliser des headers de dépréciation (Deprecation, Sunset)" }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "description": "Présentation du versioning d'API et de la gestion de la rétrocompatibilité"
          }
        },
        {
          "type": "exercise",
          "title": "Exercice : Identifier les breaking changes",
          "position": 6,
          "published": true,
          "content": {
            "question": {
              "type": "doc",
              "content": [
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Exercice : Identifier les breaking changes" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Parmi les modifications suivantes d'une API, lesquelles sont des breaking changes ?"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Ajout d'un champ `email` optionnel dans la réponse GET /users" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Suppression du champ `phone` dans la réponse GET /users" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Changement du type de `age` de string à integer" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Ajout d'un nouvel endpoint POST /users/{id}/avatar" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Modification du code de statut de 200 à 201 pour POST /users" }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "correction": {
              "type": "doc",
              "content": [
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "Correction" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Breaking changes :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Suppression du champ `phone` → les clients qui l'utilisent vont casser" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Changement du type de `age` → les clients qui parsent en string vont casser" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Modification du code de statut → les clients qui vérifient 200 vont casser" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Non-breaking changes :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Ajout d'un champ optionnel → rétrocompatible" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Ajout d'un nouvel endpoint → n'affecte pas les clients existants" }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          }
        },
        {
          "type": "tp",
          "title": "TP : Créer un contrat OpenAPI complet",
          "position": 7,
          "published": true,
          "content": {
            "instructions": {
              "type": "doc",
              "content": [
                {
                  "type": "heading",
                  "attrs": { "level": 2 },
                  "content": [
                    { "type": "text", "text": "TP : Créer un contrat OpenAPI complet" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Objectif : Définir une API complète pour un système de gestion de tâches (todo list) en utilisant OpenAPI 3.0."
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Exigences" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "L'API doit permettre de :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Lister toutes les tâches (GET /tasks)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Créer une nouvelle tâche (POST /tasks)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Récupérer une tâche par ID (GET /tasks/{id})" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Mettre à jour une tâche (PUT /tasks/{id})" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Supprimer une tâche (DELETE /tasks/{id})" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Modèle de données" }
                  ]
                },
                {
                  "type": "paragraph",
                  "content": [
                    {
                      "type": "text",
                      "text": "Une tâche (Task) doit avoir :"
                    }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "id (integer, généré automatiquement)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "title (string, requis, minLength: 1, maxLength: 200)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "description (string, optionnel, maxLength: 1000)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "completed (boolean, défaut: false)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "createdAt (string, format: date-time, généré automatiquement)" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Codes de statut à gérer" }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "200 : Succès (GET, PUT)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "201 : Créé (POST)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "204 : Pas de contenu (DELETE)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "400 : Requête invalide" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "404 : Tâche non trouvée" }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "heading",
                  "attrs": { "level": 3 },
                  "content": [
                    { "type": "text", "text": "Livrables" }
                  ]
                },
                {
                  "type": "bulletList",
                  "content": [
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Fichier OpenAPI 3.0 (YAML ou JSON)" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Validation avec Swagger Editor ou un outil similaire" }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "listItem",
                      "content": [
                        {
                          "type": "paragraph",
                          "content": [
                            { "type": "text", "text": "Génération de la documentation Swagger UI" }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "checklist": [
              "Définir la structure de base (openapi, info, servers)",
              "Créer le schéma Task dans components/schemas",
              "Définir tous les endpoints dans paths",
              "Spécifier les méthodes HTTP (GET, POST, PUT, DELETE)",
              "Définir les paramètres de requête et de chemin",
              "Définir les corps de requête (requestBody) pour POST et PUT",
              "Définir toutes les réponses possibles avec leurs codes de statut",
              "Valider le fichier OpenAPI",
              "Générer la documentation Swagger UI",
              "Tester au moins un endpoint dans Swagger UI"
            ]
          }
        },
        {
          "type": "game",
          "title": "Jeu : Associer les concepts OpenAPI",
          "position": 8,
          "published": true,
          "content": {
            "gameType": "column-matching",
            "description": "Associez les concepts OpenAPI de la colonne 1 à leurs définitions dans la colonne 2",
            "leftColumn": [
              "OpenAPI",
              "JSON Schema",
              "Swagger UI",
              "Breaking change",
              "API-first",
              "Versioning sémantique"
            ],
            "rightColumn": [
              "Standard pour décrire les API REST",
              "Vocabulaire pour valider les données JSON",
              "Interface web interactive générée à partir d'OpenAPI",
              "Modification qui casse la compatibilité avec les clients existants",
              "Approche consistant à concevoir l'API avant de coder",
              "Format MAJOR.MINOR.PATCH pour gérer les versions"
            ],
            "correctMatches": [
              {
                "left": 0,
                "right": 0
              },
              {
                "left": 1,
                "right": 1
              },
              {
                "left": 2,
                "right": 2
              },
              {
                "left": 3,
                "right": 3
              },
              {
                "left": 4,
                "right": 4
              },
              {
                "left": 5,
                "right": 5
              }
            ]
          }
        }
      ]
    }
  ]
}



