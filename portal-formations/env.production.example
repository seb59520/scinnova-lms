# Configuration de production pour Portal Formations
# Copiez ce fichier vers .env.production et remplissez les valeurs réelles
# NE COMMITEZ JAMAIS le fichier .env.production avec des secrets réels

# ============================================
# Supabase Self-Hosted Configuration
# ============================================

# Database
POSTGRES_PASSWORD=change-me-generate-secure-password-here

# JWT Configuration
# Générer avec: openssl rand -base64 32
JWT_SECRET=change-me-generate-secure-jwt-secret-here
JWT_EXP=3600

# API Keys
# Générer avec: openssl rand -base64 32
ANON_KEY=change-me-generate-anon-key-here
SERVICE_ROLE_KEY=change-me-generate-service-role-key-here

# URLs Supabase Self-Hosted
# Adapter selon votre configuration (domaine, IP, etc.)
VITE_SUPABASE_URL=http://localhost:8000
API_EXTERNAL_URL=http://localhost:8000
SITE_URL=http://localhost

# PostgREST
PGRST_DB_SCHEMAS=public,storage,graphql_public

# ============================================
# Migration depuis Supabase Cloud (optionnel)
# ============================================

# URL de connexion PostgreSQL Supabase Cloud
# Format: postgresql://postgres:[PASSWORD]@[HOST]:5432/postgres
SUPABASE_CLOUD_DB_URL=

# Ou variables séparées
SUPABASE_CLOUD_HOST=
SUPABASE_CLOUD_PORT=5432
SUPABASE_CLOUD_USER=postgres
SUPABASE_CLOUD_DB=postgres
SUPABASE_CLOUD_PASSWORD=

# URL Supabase Cloud pour l'API Storage
SUPABASE_CLOUD_URL=https://your-project.supabase.co

# ============================================
# Auth Configuration
# ============================================

DISABLE_SIGNUP=false
ENABLE_EMAIL_SIGNUP=true
ENABLE_PHONE_SIGNUP=false
URI_ALLOW_LIST=

# Email SMTP (optionnel)
SMTP_ADMIN_EMAIL=
SMTP_ADMIN_PASSWORD=
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_SENDER_NAME=Portal Formations

# OAuth Providers (optionnel)
ENABLE_GOOGLE_SIGNUP=false
GOOGLE_CLIENT_ID=
GOOGLE_SECRET=

ENABLE_APPLE_SIGNUP=false
APPLE_CLIENT_ID=
APPLE_SECRET=

# ============================================
# Application Configuration
# ============================================

# Backend
NODE_ENV=production
PORT=3001

# Frontend
# Ces variables sont injectées au build, adapter selon votre déploiement
# VITE_SUPABASE_URL et VITE_SUPABASE_ANON_KEY sont définis ci-dessus

# OpenRouter (pour la correction IA, optionnel)
VITE_OPENROUTER_API_KEY=
VITE_OPENROUTER_MODEL=google/gemini-3-flash-preview

# ============================================
# Storage Configuration
# ============================================

# Image Proxy
IMGPROXY_ENABLE_WEBP_DETECTION=true

# ============================================
# Notes
# ============================================
# 
# 1. Générez des secrets sécurisés:
#    - POSTGRES_PASSWORD: openssl rand -base64 32
#    - JWT_SECRET: openssl rand -base64 32
#    - ANON_KEY: openssl rand -base64 32
#    - SERVICE_ROLE_KEY: openssl rand -base64 32
#
# 2. Pour la migration depuis Supabase Cloud:
#    - Récupérez les credentials depuis votre dashboard Supabase
#    - Utilisez SUPABASE_CLOUD_DB_URL ou les variables séparées
#
# 3. Pour la production:
#    - Configurez un domaine et utilisez HTTPS
#    - Adaptez les URLs (remplacez localhost par votre domaine)
#    - Configurez un reverse proxy (Nginx/Traefik) pour HTTPS
